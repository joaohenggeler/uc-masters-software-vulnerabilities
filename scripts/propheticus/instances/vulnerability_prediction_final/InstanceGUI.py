import propheticus
import propheticus.core
import propheticus.shared

from InstanceConfig import InstanceConfig

class InstanceGUI(propheticus.core.GUI):
	
	def __init__(self):
		super(InstanceGUI, self).__init__()
		self.initialize_database_configurations()

	def initialize_database_configurations(self):
		self.project_names = sorted([project.short_name for project in InstanceConfig.PROJECT_LIST])
		self.project_configurations = sorted({'projects': []})

	def menuCustom(self, choice=0):
		""" Data generation menu. Called when option 4 "Framework Instance UI" is selected. """

		project_selection_callback = propheticus.shared.Utils.generalMenuData(self, 'Projects', self.project_names, Configurations=self.project_configurations)

		menu_data = {
			'1': {'name': 'Select Projects', 'callback': project_selection_callback},
			'2': {'name': 'Generate Datasets for Current Configurations', 'callback': self.generate_databases_choice},
			'-': '',
			'0': {'name': 'Back'}
		}

		propheticus.shared.Utils.printMenu('Data Generation Menu', menu_data, 'project_configurations', self)

	def generate_databases_choice(self, choice):
		""" Data generation for current configurations function. @TODO """
		propheticus.shared.Utils.printWarningMessage('Not implemented in the demo')
